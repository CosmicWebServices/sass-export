#!/usr/bin/env node

let sassExport = require('../dist').default;
let fs = require('fs');
let path = require('path');
let minimist = require('minimist');

let options = minimist(process.argv.slice(2), {
  alias: {
    h: 'help'
  }
});

let filePath = options._[0];

if (!filePath || options.help) {
  fs.createReadStream(path.resolve(__dirname, 'help.txt'))
    .pipe(process.stdout)
    .on('close', () => {
      throw Error('Error reading help');
    });
} else {

  let result = sassExport({
    filePath
  });

  console.log(result.getArray());
}